{"ast":null,"code":"var _this = this,\n    _jsxFileName = \"/Users/wescopeland/Documents/github/scoretrackr-original/src/components/game/TrackTabs/TrackTabs.tsx\",\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\nimport { Tab, Tabs } from '@material-ui/core';\nimport React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useRouter } from 'next/router';\nimport { activeGameActions, selectCurrentTrack } from '~/state/active-game';\nimport { useStyles } from './TrackTabs.styles';\nexport var TrackTabs = function TrackTabs(_ref) {\n  _s();\n\n  var _currentSelectedTrack;\n\n  var tracks = _ref.tracks,\n      gameColor = _ref.gameColor;\n  var dispatch = useDispatch();\n  var router = useRouter();\n  var currentSelectedTrack = useSelector(selectCurrentTrack);\n  var classes = useStyles({\n    gameColor: gameColor\n  });\n\n  var findTrackByFriendlyId = function findTrackByFriendlyId(trackFriendlyId) {\n    return tracks.find(function (t) {\n      return t.friendlyId === trackFriendlyId;\n    });\n  };\n\n  var navigateToTrackByFriendlyId = function navigateToTrackByFriendlyId(friendlyId, id) {\n    var trackId = id !== null && id !== void 0 ? id : findTrackByFriendlyId(friendlyId).id;\n    dispatch(activeGameActions.setSelectedTrack({\n      friendlyId: friendlyId,\n      id: trackId\n    }));\n    var newParams = new URLSearchParams(location.search);\n    newParams.set('track', friendlyId);\n    router.replace({\n      pathname: '/game/[friendlyId]',\n      query: {\n        track: friendlyId\n      }\n    }, {\n      pathname: '/game/dkong',\n      query: {\n        track: friendlyId\n      }\n    });\n  };\n\n  useEffect(function () {\n    var _location, _location$search;\n\n    if ((_location = location) === null || _location === void 0 ? void 0 : (_location$search = _location.search) === null || _location$search === void 0 ? void 0 : _location$search.length) {\n      var queryParams = new URLSearchParams(location.search);\n      var trackFriendlyId = queryParams.get('track');\n      var foundTrack = findTrackByFriendlyId(trackFriendlyId);\n\n      if (trackFriendlyId && foundTrack) {\n        navigateToTrackByFriendlyId(foundTrack.friendlyId);\n      } else {\n        navigateToTrackByFriendlyId(tracks[0].friendlyId, tracks[0].id);\n      }\n    } else {\n      navigateToTrackByFriendlyId(tracks[0].friendlyId, tracks[0].id);\n    }\n  }, []);\n\n  var handleTabChange = function handleTabChange(e, newSelectedTrackFriendlyId) {\n    if (newSelectedTrackFriendlyId !== currentSelectedTrack.friendlyId) {\n      navigateToTrackByFriendlyId(newSelectedTrackFriendlyId);\n    }\n  };\n\n  return __jsx(Tabs, {\n    classes: {\n      root: classes.tabsRoot,\n      indicator: classes.tabsIndicator,\n      scroller: classes.tabsScroller\n    },\n    value: (_currentSelectedTrack = currentSelectedTrack === null || currentSelectedTrack === void 0 ? void 0 : currentSelectedTrack.friendlyId) !== null && _currentSelectedTrack !== void 0 ? _currentSelectedTrack : false,\n    onChange: handleTabChange,\n    variant: \"scrollable\",\n    scrollButtons: \"auto\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 5\n    }\n  }, tracks.map(function (track) {\n    return __jsx(Tab, {\n      key: track.id,\n      classes: {\n        root: classes.tabItemRoot,\n        selected: classes.tabSelected\n      },\n      label: track.name,\n      value: track.friendlyId,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }\n    });\n  }));\n};\n\n_s(TrackTabs, \"r0TIXbtQQS25+w2C4ZM3Ltm7C6A=\", false, function () {\n  return [useDispatch, useRouter, useSelector, useStyles];\n});\n\n_c = TrackTabs;\n\nvar _c;\n\n$RefreshReg$(_c, \"TrackTabs\");","map":{"version":3,"sources":["/Users/wescopeland/Documents/github/scoretrackr-original/src/components/game/TrackTabs/TrackTabs.tsx"],"names":["Tab","Tabs","React","useEffect","useDispatch","useSelector","useRouter","activeGameActions","selectCurrentTrack","useStyles","TrackTabs","tracks","gameColor","dispatch","router","currentSelectedTrack","classes","findTrackByFriendlyId","trackFriendlyId","find","t","friendlyId","navigateToTrackByFriendlyId","id","trackId","setSelectedTrack","newParams","URLSearchParams","location","search","set","replace","pathname","query","track","length","queryParams","get","foundTrack","handleTabChange","e","newSelectedTrackFriendlyId","root","tabsRoot","indicator","tabsIndicator","scroller","tabsScroller","map","tabItemRoot","selected","tabSelected","name"],"mappings":"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","sourcesContent":["import { Tab, Tabs } from '@material-ui/core';\nimport React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useRouter } from 'next/router';\n\nimport { activeGameActions, selectCurrentTrack } from '~/state/active-game';\nimport { Track } from '~/entities';\nimport { useStyles } from './TrackTabs.styles';\n\ninterface TrackTabsProps {\n  tracks: Track[];\n  gameColor: string;\n}\n\nexport const TrackTabs = ({ tracks, gameColor }: TrackTabsProps) => {\n  const dispatch = useDispatch();\n  const router = useRouter();\n  const currentSelectedTrack = useSelector(selectCurrentTrack);\n  const classes = useStyles({ gameColor });\n\n  const findTrackByFriendlyId = (trackFriendlyId: string) => {\n    return tracks.find((t) => t.friendlyId === trackFriendlyId);\n  };\n\n  const navigateToTrackByFriendlyId = (friendlyId: string, id?: string) => {\n    const trackId = id ?? findTrackByFriendlyId(friendlyId).id;\n\n    dispatch(activeGameActions.setSelectedTrack({ friendlyId, id: trackId }));\n\n    const newParams = new URLSearchParams(location.search);\n    newParams.set('track', friendlyId);\n\n    router.replace(\n      {\n        pathname: '/game/[friendlyId]',\n        query: {\n          track: friendlyId\n        }\n      },\n      {\n        pathname: '/game/dkong',\n        query: {\n          track: friendlyId\n        }\n      }\n    );\n  };\n\n  useEffect(() => {\n    if (location?.search?.length) {\n      const queryParams = new URLSearchParams(location.search);\n      const trackFriendlyId = queryParams.get('track');\n\n      const foundTrack = findTrackByFriendlyId(trackFriendlyId);\n\n      if (trackFriendlyId && foundTrack) {\n        navigateToTrackByFriendlyId(foundTrack.friendlyId);\n      } else {\n        navigateToTrackByFriendlyId(tracks[0].friendlyId, tracks[0].id);\n      }\n    } else {\n      navigateToTrackByFriendlyId(tracks[0].friendlyId, tracks[0].id);\n    }\n  }, []);\n\n  const handleTabChange = (\n    e: React.ChangeEvent<{}>,\n    newSelectedTrackFriendlyId: string\n  ) => {\n    if (newSelectedTrackFriendlyId !== currentSelectedTrack.friendlyId) {\n      navigateToTrackByFriendlyId(newSelectedTrackFriendlyId);\n    }\n  };\n\n  return (\n    <Tabs\n      classes={{\n        root: classes.tabsRoot,\n        indicator: classes.tabsIndicator,\n        scroller: classes.tabsScroller\n      }}\n      value={currentSelectedTrack?.friendlyId ?? false}\n      onChange={handleTabChange}\n      variant=\"scrollable\"\n      scrollButtons=\"auto\"\n    >\n      {tracks.map((track) => (\n        <Tab\n          key={track.id}\n          classes={{\n            root: classes.tabItemRoot,\n            selected: classes.tabSelected\n          }}\n          label={track.name}\n          value={track.friendlyId}\n        />\n      ))}\n    </Tabs>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}